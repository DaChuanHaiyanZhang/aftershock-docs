import{_ as t,I as l,c as h,o as i,a5 as a,b as p,w as n,a as r,J as k,a6 as c}from"./chunks/framework.BOSSiFom.js";const m=JSON.parse('{"title":"My Account","description":"","frontmatter":{},"headers":[],"relativePath":"en/aftershockau/data-user-account.md","filePath":"en/aftershockau/data-user-account.md"}'),o={name:"en/aftershockau/data-user-account.md"};function d(u,s,E,g,y,A){const e=l("Mermaid");return i(),h("div",null,[s[1]||(s[1]=a(`<h1 id="my-account" tabindex="-1">My Account <a class="header-anchor" href="#my-account" aria-label="Permalink to “My Account”">​</a></h1><nav class="table-of-contents"><ul><li><a href="#data-source">Data Source</a></li><li><a href="#component-reference-chain">Component Reference Chain</a></li></ul></nav><p>User Personal Center</p><div class="danger custom-block github-alert"><p class="custom-block-title">DANGER</p><p>This interface can only be viewed and operated when the user is logged in.</p></div><h2 id="data-source" tabindex="-1">Data Source <a class="header-anchor" href="#data-source" aria-label="Permalink to “Data Source”">​</a></h2><p>The data for this interface is queried from the Shopify Storefront API to fetch user data.</p><ol><li>Query current user information when the interface initializes.<div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// account.jsx core code</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context.storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CUSTOMER_DETAILS_QUERY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    variables: { customerAccessToken },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li>The current user&#39;s order information is included in the initial interface data.</li><li>Re-fetch user&#39;s personal information when switching interfaces; it can be edited.<div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// account.profile.jsx data fetching code</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CUSTOMER_DETAILS_QUERY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    variables: { customerAccessToken },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li>Fetch user&#39;s historical order information when switching interfaces.<div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// account.history.jsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CUSTOMER_ORDERS_QUERY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  variables: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    customerAccessToken,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    first,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    after,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div></li></ol><div class="warning custom-block github-alert"><p class="custom-block-title">WARNING</p><p>Can the <code>Outlet</code> component cache user&#39;s personal information to avoid repeated calls?</p></div><h2 id="component-reference-chain" tabindex="-1">Component Reference Chain <a class="header-anchor" href="#component-reference-chain" aria-label="Permalink to “Component Reference Chain”">​</a></h2>`,9)),(i(),p(c,null,{default:n(()=>[k(e,{id:"mermaid-53",class:"mermaid my-class",graph:"flowchart%20TB%0Aaccount.jsx%20--%3E%20AccountMenu%0Aaccount.jsx%20--%3E%20Outlet%0A%0AAccountMenu%20--PC--%3E%20AccountMenuDesktop%0AAccountMenu%20--Mobile--%3E%20AccountMenuMobile%0A%0AOutlet%20--%3E%20account.orders._index.jsx%0AOutlet%20--%3E%20account.profile.jsx%0AOutlet%20--%3E%20account.history.jsx%0A%0Aaccount.orders._index.jsx%20--%3E%20OrdersList%0Aaccount.orders._index.jsx%20--%3E%20EmptyOrders%0A%0Aaccount.history.jsx%20--%3E%20OrdersHistoryList%20--%3E%20OT%5Border-tracker.jsx%3Forder%3Dv%5D%0A"})]),fallback:n(()=>[...s[0]||(s[0]=[r(" Loading... ",-1)])]),_:1})),s[2]||(s[2]=a(`<p>This interface uses the <code>Outlet</code> loading technique.</p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>Direct link to <a href="https://remix.run/docs/en/main/components/outlet" target="_blank" rel="noreferrer">Outlet</a> documentation. Provides context values for the element tree under the outlet. Used when a parent route needs to provide values to child routes.</p></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">app\\routes\\account.jsx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">app\\components\\Account\\AccountMenu\\AccountMenuDesktop\\index.jsx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">app\\components\\Account\\AccountMenu\\AccountMenuMobile\\index.jsx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">app\\routes\\account.orders._index.jsx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">app\\components\\Account\\OrdersList\\index.jsx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (EmptyOrders)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">app\\routes\\account.history.jsx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">app\\components\\Account\\OrdersHistoryList\\index.jsx</span></span></code></pre></div>`,3))])}const F=t(o,[["render",d]]);export{m as __pageData,F as default};
