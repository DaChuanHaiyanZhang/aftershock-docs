import{_ as h,I as d,c,o as t,a5 as l,b as p,j as a,w as i,a as e,J as r,a6 as o}from"./chunks/framework.BOSSiFom.js";const y=JSON.parse('{"title":"Contact us 联系我们","description":"","frontmatter":{},"headers":[],"relativePath":"aftershockau/data-contact-us.md","filePath":"aftershockau/data-contact-us.md"}'),k={name:"aftershockau/data-contact-us.md"};function E(g,s,u,m,f,b){const n=d("Mermaid");return t(),c("div",null,[s[2]||(s[2]=l('<h1 id="contact-us-联系我们" tabindex="-1">Contact us 联系我们 <a class="header-anchor" href="#contact-us-联系我们" aria-label="Permalink to “Contact us 联系我们”">​</a></h1><nav class="table-of-contents"><ul><li><a href="#数据流">数据流</a></li><li><a href="#组件引用结构链">组件引用结构链</a></li></ul></nav><h2 id="数据流" tabindex="-1">数据流 <a class="header-anchor" href="#数据流" aria-label="Permalink to “数据流”">​</a></h2><p>数据在 <code>Prismic</code> 中维护以后，通过 <code>webhook</code> 保存到 <code>Shopify Metaobjects</code>，而后使用 <code>Storefront API</code> 调用，<a href="https://aftershockpc.prismic.io/builder/pages/ZMdk_REAACQAnDmw?s=published" target="_blank" rel="noreferrer"><code>#aux-contactus</code></a></p><p>在 page.$handle.jsx 文件中与其他/page/页面一样统一调入数据。</p>',5)),(t(),p(o,null,{default:i(()=>[r(n,{id:"mermaid-15",class:"mermaid my-class",graph:"flowchart%20LR%0APrismic%20--%3E%20page.%24handle.jsx%20--%3E%20%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%20--%3E%20%E5%85%B7%E4%BD%93%E7%9A%84handle%0A"})]),fallback:i(()=>[...s[0]||(s[0]=[e(" Loading... ",-1)])]),_:1})),s[3]||(s[3]=a("div",{class:"note custom-block github-alert"},[a("p",{class:"custom-block-title"},"NOTE"),a("p",null,"这里要注意的是，这里的数据实际上都是通过 hooks 的方式同步在了 shopify 的 metaobjects 上面，然后调用的。")],-1)),s[4]||(s[4]=a("h2",{id:"组件引用结构链",tabindex:"-1"},[e("组件引用结构链 "),a("a",{class:"header-anchor",href:"#组件引用结构链","aria-label":"Permalink to “组件引用结构链”"},"​")],-1)),(t(),p(o,null,{default:i(()=>[r(n,{id:"mermaid-24",class:"mermaid my-class",graph:"flowchart%20LR%0Apage.%24handle.jsx%20--%3E%20PrismicPreviewWrapperAux%20--%3E%20AuxSliceRenderer(%E6%8B%86%E8%A7%A3)%20--%3E%20ContactWithButton%0A"})]),fallback:i(()=>[...s[1]||(s[1]=[e(" Loading... ",-1)])]),_:1})),s[5]||(s[5]=l(`<ul><li><p><strong>PrismicPreviewWrapperAux</strong></p><p>作为 wrapper 组件进行包裹</p></li><li><p><strong>AuxSliceRenderer</strong></p><p>AuxSliceRenderer 有一个机制就是拆解 pages 当中的所有 handle 然后根据 handle 引用了 ContactWithButton 组件</p></li><li><p><strong>ContactWithButton</strong></p><div class="info custom-block github-alert"><p class="custom-block-title">INFO</p><p>该界面使用了 Live Chat 插件：<a href="https://dev.frontapp.com/reference/installation" target="_blank" rel="noreferrer">@frontapp/plugin-sdk</a></p></div><div class="warning custom-block github-alert"><p class="custom-block-title">WARNING</p><p>另外，从 root.jsx 入口文件中可以看到，该界面隐藏了右下角的聊天信息</p></div><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isKnowledgeHub) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    loadChatBot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    cleanupChatBot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    cleanupChatBot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, [isKnowledgeHub, location.pathname]);</span></span></code></pre></div><p>该组件的数据源头是 page.$handle.jsx.loader</p></li></ul>`,1))])}const A=h(k,[["render",E]]);export{y as __pageData,A as default};
