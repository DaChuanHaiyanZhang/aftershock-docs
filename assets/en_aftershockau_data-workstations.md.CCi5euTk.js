import{_ as p,I as k,c as o,o as i,a5 as t,b as n,w as a,a as l,J as h,a6 as r}from"./chunks/framework.BOSSiFom.js";const u=JSON.parse('{"title":"Workstations","description":"","frontmatter":{},"headers":[],"relativePath":"en/aftershockau/data-workstations.md","filePath":"en/aftershockau/data-workstations.md"}'),d={name:"en/aftershockau/data-workstations.md"};function c(E,s,g,y,F,f){const e=k("Mermaid");return i(),o("div",null,[s[2]||(s[2]=t('<h1 id="workstations" tabindex="-1">Workstations <a class="header-anchor" href="#workstations" aria-label="Permalink to â€œWorkstationsâ€">â€‹</a></h1><nav class="table-of-contents"><ul><li><a href="#data-source">Data Source</a><ul><li><a href="#_1-first-fetch-the-prismic-cached-page-data">1. First, fetch the Prismic-cached page data.</a></li><li><a href="#_2-fetch-all-pc-models">2. Fetch all PC Models.</a></li><li><a href="#_3-fetch-all-corresponding-features-lists-using-promise-all">3. Fetch all corresponding Features Lists using Promise.all.</a></li></ul></li><li><a href="#component-reference-chain">Component Reference Chain</a></li></ul></nav><p>This interface primarily displays custom collection products related to <code>workstations</code>.</p><h2 id="data-source" tabindex="-1">Data Source <a class="header-anchor" href="#data-source" aria-label="Permalink to â€œData Sourceâ€">â€‹</a></h2><p>The Schema data model for this interface is completed in <code>Prismic</code>, then updated to <code>Shopify Metaobjects</code> via Prismic&#39;s <code>webhook</code>, and finally fetched using the <code>Storefront API</code>. It is then rendered using <code>Remix+React</code>.</p>',5)),(i(),n(r,null,{default:a(()=>[h(e,{id:"mermaid-15",class:"mermaid my-class",graph:"flowchart%20LR%0APrismic%20--webhooks--%3E%20SM%5BShopify%20Metaobjects%5D%20--Storefront%20API--%3E%20workstations.%24handle.jsx%0A"})]),fallback:a(()=>[...s[0]||(s[0]=[l(" Loading... ",-1)])]),_:1})),s[3]||(s[3]=t(`<h3 id="_1-first-fetch-the-prismic-cached-page-data" tabindex="-1">1. First, fetch the Prismic-cached page data. <a class="header-anchor" href="#_1-first-fetch-the-prismic-cached-page-data" aria-label="Permalink to â€œ1. First, fetch the Prismic-cached page data.â€">â€‹</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  handle: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    handle: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ws-&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> params.handle,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;prismic_cache_workstations_page&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tempData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET_METAOBJECTS_BY_HANDLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  variables,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  cache: storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CacheShort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_2-fetch-all-pc-models" tabindex="-1">2. Fetch all PC Models. <a class="header-anchor" href="#_2-fetch-all-pc-models" aria-label="Permalink to â€œ2. Fetch all PC Models.â€">â€‹</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadCriticalData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prismicData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">previewData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetchAllPcModels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_3-fetch-all-corresponding-features-lists-using-promise-all" tabindex="-1">3. Fetch all corresponding Features Lists using Promise.all. <a class="header-anchor" href="#_3-fetch-all-corresponding-features-lists-using-promise-all" aria-label="Permalink to â€œ3. Fetch all corresponding Features Lists using Promise.all.â€">â€‹</a></h3><p>The <code>loadCriticalData</code> method is generally a helper data-loading function for <code>loader</code> in this project.</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadCriticalData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prismicData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">previewData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> METAOBJECT_QUERY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      query GetMetaobject($handle: MetaobjectHandleInput!) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        metaobject(handle: $handle) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          fields {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            key</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            value</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    \`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetchFeaturesForModels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="danger custom-block github-alert"><p class="custom-block-title">DANGER</p><p>The <code>fetchFeaturesForModels</code> method uses <code>Promise.all</code> to load all relevant <code>models</code> data. Currently, it uses the <code>METAOBJECT_QUERY</code> query method, which could be replaced with <code>metaobjects</code>. <a href="./suggestion.html#workstations-page-fetchfeaturesformodels-method-alternative"><strong>View alternative solution</strong></a> ðŸ˜˜</p></div><h2 id="component-reference-chain" tabindex="-1">Component Reference Chain <a class="header-anchor" href="#component-reference-chain" aria-label="Permalink to â€œComponent Reference Chainâ€">â€‹</a></h2>`,9)),(i(),n(r,null,{default:a(()=>[h(e,{id:"mermaid-39",class:"mermaid my-class",graph:"flowchart%20LR%0Aworkstations.%24handle.jsx%20--%3E%20Workstations%0A%0AWorkstations%20--%3E%20StickyLinks%0AWorkstations%20--%3E%20Category%0AWorkstations%20--%3E%20StaticCode%0A%0ACategory%20--%3E%20Header%20--%3E%20PrismicRichText%0ACategory%20--%3E%20DesktopPcModelsList%20--%3E%20PcModelCard%0ACategory%20--%3E%20MobilePcModelsList%20--%3E%20PcModelCard%0A"})]),fallback:a(()=>[...s[1]||(s[1]=[l(" Loading... ",-1)])]),_:1}))])}const C=p(d,[["render",c]]);export{u as __pageData,C as default};
