import{_ as p,I as r,c as d,o as a,a5 as e,b as n,w as i,a as l,J as h,a6 as k}from"./chunks/framework.BOSSiFom.js";const u=JSON.parse('{"title":"Workstations","description":"","frontmatter":{},"headers":[],"relativePath":"aftershockau/data-workstations.md","filePath":"aftershockau/data-workstations.md"}'),o={name:"aftershockau/data-workstations.md"};function c(E,s,g,y,F,m){const t=r("Mermaid");return a(),d("div",null,[s[2]||(s[2]=e('<h1 id="workstations" tabindex="-1">Workstations <a class="header-anchor" href="#workstations" aria-label="Permalink to â€œWorkstationsâ€">â€‹</a></h1><nav class="table-of-contents"><ul><li><a href="#æ•°æ®æº">æ•°æ®æº</a><ul><li><a href="#_1-å…ˆè·å–åˆ°-prismic-ç¼“å­˜çš„é¡µé¢æ•°æ®">1. å…ˆè·å–åˆ° Prismic ç¼“å­˜çš„é¡µé¢æ•°æ®</a></li><li><a href="#_2-è·å–åˆ°æ‰€æœ‰çš„-pc-models">2. è·å–åˆ°æ‰€æœ‰çš„ PC Models</a></li><li><a href="#_3-é€šè¿‡-promise-all-è·å–åˆ°æ‰€æœ‰-å¯¹åº”çš„-features-listã€‚">3. é€šè¿‡ Promise.all è·å–åˆ°æ‰€æœ‰ å¯¹åº”çš„ Features Listã€‚</a></li></ul></li><li><a href="#ç»„ä»¶å¼•ç”¨ç»“æ„é“¾">ç»„ä»¶å¼•ç”¨ç»“æ„é“¾</a></li></ul></nav><p>è¯¥ç•Œé¢ä¸»è¦å±•ç¤º <code>workstations</code> ç­‰ç›¸å…³çš„å®šåˆ¶é›†åˆäº§å“ã€‚</p><h2 id="æ•°æ®æº" tabindex="-1">æ•°æ®æº <a class="header-anchor" href="#æ•°æ®æº" aria-label="Permalink to â€œæ•°æ®æºâ€">â€‹</a></h2><p>è¯¥ç•Œé¢çš„ Schema æ•°æ®æ¨¡å‹ï¼Œåœ¨ <code>Prismic</code> å®Œæˆä¹‹åï¼Œé€šè¿‡ Prismic çš„ <code>webhook</code> æ›´æ–°åˆ° <code>Shopify Metaobjects</code> ç„¶åé€šè¿‡ <code>Storefront API</code> è°ƒç”¨ã€‚è€Œåä½¿ç”¨ <code>Remix+React</code> æ¸²æŸ“</p>',5)),(a(),n(k,null,{default:i(()=>[h(t,{id:"mermaid-15",class:"mermaid my-class",graph:"flowchart%20LR%0APrismic%20--webhooks--%3E%20SM%5BShopify%20Metaobjects%5D%20--Storefront%20API--%3E%20workstations.%24handle.jsx%0A"})]),fallback:i(()=>[...s[0]||(s[0]=[l(" Loading... ",-1)])]),_:1})),s[3]||(s[3]=e(`<h3 id="_1-å…ˆè·å–åˆ°-prismic-ç¼“å­˜çš„é¡µé¢æ•°æ®" tabindex="-1">1. å…ˆè·å–åˆ° Prismic ç¼“å­˜çš„é¡µé¢æ•°æ® <a class="header-anchor" href="#_1-å…ˆè·å–åˆ°-prismic-ç¼“å­˜çš„é¡µé¢æ•°æ®" aria-label="Permalink to â€œ1. å…ˆè·å–åˆ° Prismic ç¼“å­˜çš„é¡µé¢æ•°æ®â€">â€‹</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  handle: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    handle: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ws-&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> params.handle,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;prismic_cache_workstations_page&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tempData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET_METAOBJECTS_BY_HANDLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  variables,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  cache: storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CacheShort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_2-è·å–åˆ°æ‰€æœ‰çš„-pc-models" tabindex="-1">2. è·å–åˆ°æ‰€æœ‰çš„ PC Models <a class="header-anchor" href="#_2-è·å–åˆ°æ‰€æœ‰çš„-pc-models" aria-label="Permalink to â€œ2. è·å–åˆ°æ‰€æœ‰çš„ PC Modelsâ€">â€‹</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadCriticalData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prismicData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">previewData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetchAllPcModels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_3-é€šè¿‡-promise-all-è·å–åˆ°æ‰€æœ‰-å¯¹åº”çš„-features-listã€‚" tabindex="-1">3. é€šè¿‡ Promise.all è·å–åˆ°æ‰€æœ‰ å¯¹åº”çš„ Features Listã€‚ <a class="header-anchor" href="#_3-é€šè¿‡-promise-all-è·å–åˆ°æ‰€æœ‰-å¯¹åº”çš„-features-listã€‚" aria-label="Permalink to â€œ3. é€šè¿‡ Promise.all è·å–åˆ°æ‰€æœ‰ å¯¹åº”çš„ Features Listã€‚â€">â€‹</a></h3><p><code>loadCriticalData</code> æ–¹æ³•ä¸€èˆ¬æ˜¯æœ¬é¡¹ç›®ä¸­è¾…åŠ© <code>loader</code> çš„æ•°æ®åŠ è½½å‡½æ•°.</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadCriticalData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prismicData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">previewData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> METAOBJECT_QUERY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      query GetMetaobject($handle: MetaobjectHandleInput!) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        metaobject(handle: $handle) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          fields {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            key</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            value</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    \`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  fetchFeaturesForModels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="danger custom-block github-alert"><p class="custom-block-title">DANGER</p><p><code>fetchFeaturesForModels</code> æ–¹æ³•ä¸­ä½¿ç”¨äº† <code>Promise.all</code> åŠ è½½æ‰€æœ‰ç›¸å…³çš„ <code>models</code> å¯¹åº”çš„æ•°æ®ï¼Œè¿™é‡Œç›®å‰ä½¿ç”¨çš„æ˜¯ <code>METAOBJECT_QUERY</code> æŸ¥è¯¢æ–¹å¼å¯ä»¥æ›¿æ¢ä¸º <code>metaobjects</code>ï¼Œ<a href="./suggestion.html#workstations-é¡µé¢-fetchfeaturesformodels-æ–¹æ³•æ›¿ä»£æ–¹æ¡ˆ"><strong>æŸ¥çœ‹æ›¿ä»£æ–¹æ¡ˆ</strong></a>ğŸ˜˜</p></div><h2 id="ç»„ä»¶å¼•ç”¨ç»“æ„é“¾" tabindex="-1">ç»„ä»¶å¼•ç”¨ç»“æ„é“¾ <a class="header-anchor" href="#ç»„ä»¶å¼•ç”¨ç»“æ„é“¾" aria-label="Permalink to â€œç»„ä»¶å¼•ç”¨ç»“æ„é“¾â€">â€‹</a></h2>`,9)),(a(),n(k,null,{default:i(()=>[h(t,{id:"mermaid-39",class:"mermaid my-class",graph:"flowchart%20LR%0Aworkstations.%24handle.jsx%20--%3E%20Workstations%0A%0AWorkstations%20--%3E%20StickyLinks%0AWorkstations%20--%3E%20Category%0AWorkstations%20--%3E%20StaticCode%0A%0ACategory%20--%3E%20Header%20--%3E%20PrismicRichText%0ACategory%20--%3E%20DesktopPcModelsList%20--%3E%20PcModelCard%0ACategory%20--%3E%20MobilePcModelsList%20--%3E%20PcModelCard%0A"})]),fallback:i(()=>[...s[1]||(s[1]=[l(" Loading... ",-1)])]),_:1}))])}const C=p(o,[["render",c]]);export{u as __pageData,C as default};
