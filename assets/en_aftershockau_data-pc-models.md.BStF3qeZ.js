import{_ as r,I as o,c,o as n,a5 as l,b as t,j as i,w as a,a as h,J as p,a6 as k}from"./chunks/framework.BOSSiFom.js";const f=JSON.parse('{"title":"Custom","description":"","frontmatter":{},"headers":[],"relativePath":"en/aftershockau/data-pc-models.md","filePath":"en/aftershockau/data-pc-models.md"}'),d={name:"en/aftershockau/data-pc-models.md"};function E(g,s,y,F,m,u){const e=o("Mermaid");return n(),c("div",null,[s[2]||(s[2]=l('<h1 id="custom" tabindex="-1">Custom <a class="header-anchor" href="#custom" aria-label="Permalink to “Custom”">​</a></h1><nav class="table-of-contents"><ul><li><a href="#data-source">Data Source</a><ul><li><a href="#actual-price-and-compare-at-price-composition">Actual Price and Compare-at Price Composition</a></li><li><a href="#custom-content-submission">Custom Content Submission</a></li><li><a href="#core-content">Core Content</a></li><li><a href="#configuration-validation-logic">Configuration Validation Logic</a></li></ul></li><li><a href="#component-reference-chain">Component Reference Chain</a></li></ul></nav><p>This interface primarily showcases <code>Aftershock</code>&#39;s ability to customize products.</p><h2 id="data-source" tabindex="-1">Data Source <a class="header-anchor" href="#data-source" aria-label="Permalink to “Data Source”">​</a></h2><p>The data for pc-models is stored in <code>Retool</code>. However, after user operations in <code>Prismic</code>, it is synchronized to <code>Prismic</code>. Then, <code>Prismic</code> synchronizes it to <code>Shopify Metaobjects</code> via <code>webhooks</code>. Finally, the <code>Storefront API</code> is used to fetch the data into <code>Hydrogen</code> for rendering.</p>',5)),(n(),t(k,null,{default:a(()=>[p(e,{id:"mermaid-15",class:"mermaid my-class",graph:"flowchart%20LR%0A%0ARetool%20--%3E%20Prismic%20--webhooks--%3E%20SM%5BShopify%20Meatobjects%5D%20--%3E%20Hydrogen%20--%3E%20pc-models.%24handle.jsx%0A"})]),fallback:a(()=>[...s[0]||(s[0]=[h(" Loading... ",-1)])]),_:1})),s[3]||(s[3]=l(`<p>The <code>Prismic</code> data is used in the following places:</p><ol><li><code>Shopify Metaobjects</code> - <code>#custom_pc_search_cache</code></li><li><code>Shopify Metaobjects</code> - <code>#prismic_cache_pc_model_pages</code></li><li><code>Shopify Metaobjects</code> - <code>#prismic_cache_panel_prints</code></li><li><code>Shopify Metaobjects</code> - <code>#custom_pc_cache</code></li><li><code>Shopify Metaobjects</code> - <code>#prismic_cache_panel_prints</code></li></ol><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark has-highlighted" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// pc-models.$handle.jsx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    query GetMetaobject($handle: MetaobjectHandleInput!) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      metaobject(handle: $handle) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        handle</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        type</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        fields {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          key</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          value</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    handle: {handle: params.handle, type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;custom_pc_search_cache&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line highlighted error"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tempData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchWithTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line highlighted error"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    context.storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(query, {</span></span>
<span class="line highlighted error"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      variables,</span></span>
<span class="line highlighted error"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      cache: context.storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CacheLong</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span></span>
<span class="line highlighted error"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }), </span></span>
<span class="line highlighted error"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ); </span></span>
<span class="line highlighted error"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (  </span></span>
<span class="line highlighted error"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( </span></span>
<span class="line highlighted error"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      tempData?.metaobject?.fields?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">find</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">field</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> field.key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span></span>
<span class="line highlighted error"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ?.value, </span></span>
<span class="line highlighted error"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ).price </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 99999</span></span>
<span class="line highlighted error"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ) { </span></span>
<span class="line highlighted error"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> redirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/404&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span></span>
<span class="line highlighted error"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> prismicVariables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    handle: {handle: params.handle, type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;prismic_cache_pc_model_pages&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tempPrismicData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context.storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(query, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    variables: prismicVariables,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cache: context.storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CacheShort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadCriticalData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prismicData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    query GetMetaobject($handle: MetaobjectHandleInput!) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      metaobject(handle: $handle) {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        handle</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        type</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        fields {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          key</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          value</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> variables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    handle: {handle: params.handle, type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;custom_pc_cache&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pcConfigVariables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    handle: {handle: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;pc-config&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;prismic_cache_global_data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // const prismicVariables = {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //   handle: {handle: params.handle, type: &#39;prismic_cache_pc_model_pages&#39;},</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> panelPrintsVariables</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    handle: {handle: params.handle, type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;prismic_cache_panel_prints&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // prismicData,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    pcConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    tempData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    panelPrintsImages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">allSettled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // fetchWithTimeout(</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //   storefront.query(query, {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //     variables: prismicVariables,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //     cache: storefront.CacheShort(),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //   }),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fetchWithTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET_METAOBJECTS_BY_HANDLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        variables: pcConfigVariables,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cache: storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CacheShort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fetchWithTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(query, {variables, cache: storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CacheLong</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fetchWithTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">GET_METAOBJECTS_BY_HANDLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        variables: panelPrintsVariables,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cache: storefront.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CacheShort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="danger custom-block github-alert"><p class="custom-block-title">DANGER</p><p>Note that the red-marked code above indicates that if the price exceeds <code>99999</code>, it is considered out of the allowed range and is discarded.</p></div><h3 id="actual-price-and-compare-at-price-composition" tabindex="-1">Actual Price and Compare-at Price Composition <a class="header-anchor" href="#actual-price-and-compare-at-price-composition" aria-label="Permalink to “Actual Price and Compare-at Price Composition”">​</a></h3><p><code>Base Price + Component Price</code></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// pc-models.$handle.jsx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDynamicPrice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(basePrice </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> optionsPrice);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDynamicCompareAt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(baseCompareAt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> optionsCompareAt);</span></span></code></pre></div><h3 id="custom-content-submission" tabindex="-1">Custom Content Submission <a class="header-anchor" href="#custom-content-submission" aria-label="Permalink to “Custom Content Submission”">​</a></h3><ul><li><p>Step 1: Check if the product already exists, specifically if it contains the existing combination.</p><ul><li><code>Exists</code>: Check if the price matches the current one; if not, update the price. Then perform a search.</li><li><code>Does Not Exist</code>: Create the product, then perform a search.</li></ul></li><li><p>Step 2: Return the existing product object and add it to the cart.</p></li></ul><p>Three <code>APIs</code> are used here:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/api/searchProduct</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> api.searchProduct.jsx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/api/updateProductPrice</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> api.updateProductPrice.jsx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/api/createProduct</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> api.createProduct.jsx</span></span></code></pre></div><h3 id="core-content" tabindex="-1">Core Content <a class="header-anchor" href="#core-content" aria-label="Permalink to “Core Content”">​</a></h3><h4 id="apollo" tabindex="-1"><a href="https://www.apollographql.com/docs/" target="_blank" rel="noreferrer">Apollo</a> <a class="header-anchor" href="#apollo" aria-label="Permalink to “Apollo”">​</a></h4><p>Since users do not have permission to create customized products independently, <code>Apollo</code> is used here to create a virtual admin, calling the <code>admin</code> service to perform create, update, and search operations.</p><p>This is quite innovative.</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {ApolloClient, InMemoryCache, HttpLink} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@apollo/client/core&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createAdminClient</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">shopifyAdminURL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">shopifyAccessToken</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ApolloClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    link: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HttpLink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      uri: shopifyAdminURL,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      headers: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;X-Shopify-Access-Token&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: shopifyAccessToken,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;Content-Type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;application/json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Accept: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;application/json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;User-Agent&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MyApp/1.0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cache: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InMemoryCache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="configuration-validation-logic" tabindex="-1">Configuration Validation Logic <a class="header-anchor" href="#configuration-validation-logic" aria-label="Permalink to “Configuration Validation Logic”">​</a></h3><h4 id="inventory-check-out-of-stock" tabindex="-1">Inventory Check (Out of Stock) <a class="header-anchor" href="#inventory-check-out-of-stock" aria-label="Permalink to “Inventory Check (Out of Stock)”">​</a></h4><ul><li>Check if there are out-of-stock components in the oosIds array.</li><li>If yes, automatically jump to the configuration step of the first out-of-stock component.</li><li>Add all out-of-stock components to noticedOptions to notify the user.</li></ul><hr><h4 id="error-deduplication-mechanism" tabindex="-1">Error Deduplication Mechanism <a class="header-anchor" href="#error-deduplication-mechanism" aria-label="Permalink to “Error Deduplication Mechanism”">​</a></h4><ul><li>Use isDuplicateError to prevent duplicate errors.</li><li>Compare based on specific error attributes (from, to, attrName, etc.).</li></ul><h4 id="configuration-logic-check" tabindex="-1">Configuration Logic Check <a class="header-anchor" href="#configuration-logic-check" aria-label="Permalink to “Configuration Logic Check”">​</a></h4><hr><ul><li><h5 id="water-cooling-system-and-gpu-customization-check" tabindex="-1">Water Cooling System and GPU Customization Check <a class="header-anchor" href="#water-cooling-system-and-gpu-customization-check" aria-label="Permalink to “Water Cooling System and GPU Customization Check”">​</a></h5><ul><li>Check if a water-cooled CPU cooling system is selected.</li><li>Check if GPU customization is selected.</li><li>If GPU customization is selected but water cooling is not, suggest upgrading to water cooling.</li></ul></li><li><h5 id="high-performance-gpu-cable-prompt" tabindex="-1">High-Performance GPU Cable Prompt <a class="header-anchor" href="#high-performance-gpu-cable-prompt" aria-label="Permalink to “High-Performance GPU Cable Prompt”">​</a></h5><ul><li>Check if there is a GPU with power consumption &gt;650W.</li><li>If there is a high-power GPU and no basic cable is selected, prompt that a cable sleeve is missing.</li></ul></li><li><h5 id="operating-system-and-ram-compatibility" tabindex="-1">Operating System and RAM Compatibility <a class="header-anchor" href="#operating-system-and-ram-compatibility" aria-label="Permalink to “Operating System and RAM Compatibility”">​</a></h5><ul><li>Check if the operating system supports sufficient RAM size.</li><li>Use TEMPLATES to generate standardized error messages.</li></ul></li><li><h5 id="component-attribute-validation-core-logic" tabindex="-1">Component Attribute Validation (Core Logic) <a class="header-anchor" href="#component-attribute-validation-core-logic" aria-label="Permalink to “Component Attribute Validation (Core Logic)”">​</a></h5><ul><li>USB-C header missing prompt.</li><li>Motherboard heat sink and SSD cooling requirements.</li><li>Gen5 SSD speed limit check.</li><li>Performance prompt for pairing a low-end motherboard with a Gen5 SSD.</li></ul></li><li><h5 id="custom-item-mutual-exclusion-check" tabindex="-1">Custom Item Mutual Exclusion Check <a class="header-anchor" href="#custom-item-mutual-exclusion-check" aria-label="Permalink to “Custom Item Mutual Exclusion Check”">​</a></h5><ul><li>Panel printing and Ultra-Labs customization cannot be selected simultaneously.</li></ul></li></ul><h2 id="component-reference-chain" tabindex="-1">Component Reference Chain <a class="header-anchor" href="#component-reference-chain" aria-label="Permalink to “Component Reference Chain”">​</a></h2>`,26)),(n(),t(k,null,{default:a(()=>[p(e,{id:"mermaid-246",class:"mermaid my-class",graph:"flowchart%20LR%0A%0Apc-models.%24handle.jsx%20--%3E%20PrismicPreviewWrapperPcModels%0A%0APrismicPreviewWrapperPcModels%20--%3E%20PcModel%0APrismicPreviewWrapperPcModels%20--%3E%20PcModelReadabilityArticle%0A%0APcModel%20--%3E%20PcModelHeader%0APcModel%20--%3E%20PcModelMenu%0APcModel%20--%3E%20PcModelContent%0APcModel%20--%3E%20StaticCode%0APcModel%20--%3E%20PcModelFooter%0A%0A%0APcModelContent%20--%3E%20PcModelOptionsGroupList%0APcModelContent%20--%3E%20ReviewStep%0APcModelContent%20--%3E%20PanelPrints%0APcModelContent%20--%3E%20PcModelStickySide%0APcModelContent%20--%3E%20NoticedOptionsModal%0APcModelContent%20--%3E%20ErrorsOptionsModal%0APcModelContent%20--%3E%20DelayedOptionsModal%0A"})]),fallback:a(()=>[...s[1]||(s[1]=[h(" Loading... ",-1)])]),_:1})),s[4]||(s[4]=i("ul",null,[i("li",null,"PcModelReadabilityArticle: Hidden element for SEO purposes (hidden HTML)."),i("li",null,"PcModelMenu: Sticky tabs effect."),i("li",null,"PcModelContent: Contains configuration options and other content."),i("li",null,"PcModelFooter: Form submission content.")],-1))])}const A=r(d,[["render",E]]);export{f as __pageData,A as default};
