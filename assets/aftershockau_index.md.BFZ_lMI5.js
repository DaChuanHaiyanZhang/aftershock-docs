import{_ as d,I as c,c as n,o as i,a5 as s,b as t,w as a,a as r,J as l,a6 as h,ap as p}from"./chunks/framework.BOSSiFom.js";const _=JSON.parse('{"title":"AftershockPC-AU-Hydrogen","description":"","frontmatter":{},"headers":[],"relativePath":"aftershockau/index.md","filePath":"aftershockau/index.md"}'),f={name:"aftershockau/index.md"};function k(b,e,g,m,y,u){const o=c("Mermaid");return i(),n("div",null,[e[2]||(e[2]=s('<h1 id="aftershockpc-au-hydrogen" tabindex="-1">AftershockPC-AU-Hydrogen <a class="header-anchor" href="#aftershockpc-au-hydrogen" aria-label="Permalink to “AftershockPC-AU-Hydrogen”">​</a></h1><nav class="table-of-contents"><ul><li><a href="#概述">概述</a></li><li><a href="#项目使用到的工具">项目使用到的工具</a><ul><li><a href="#prismic-cms">Prismic CMS</a></li><li><a href="#middleware">Middleware</a></li><li><a href="#retool">Retool</a></li><li><a href="#shopify-metaobjects">Shopify Metaobjects</a></li><li><a href="#shopify-storefront-api">Shopify Storefront API</a></li></ul></li><li><a href="#工具之间的关系图">工具之间的关系图</a></li><li><a href="#nodejs-环境要求">NodeJS 环境要求</a></li><li><a href="#快速启动">快速启动</a><ul><li><a href="#_1-先链接到shopify">1. 先链接到shopify</a></li><li><a href="#_2-运行启动指令">2. 运行启动指令</a></li><li><a href="#_3-发布到-oxygen-测试服">3. 发布到 Oxygen 测试服</a></li><li><a href="#_4-发布到-oxygen">4. 发布到 Oxygen</a></li></ul></li><li><a href="#开发工具">开发工具</a></li></ul></nav><h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to “概述”">​</a></h2><p>本项目基于 <code>Shopify Hydrogen</code> + <code>Remix + React</code>，结合多种现代前端工具和第三方服务，实现电商前端的高性能、可扩展开发体验。</p><h2 id="项目使用到的工具" tabindex="-1">项目使用到的工具 <a class="header-anchor" href="#项目使用到的工具" aria-label="Permalink to “项目使用到的工具”">​</a></h2><p>在开发和浏览之前，我们需要知道项目使用了哪些工具，以及工具的作用，方便我们理解项目。</p><h3 id="prismic-cms" tabindex="-1"><a href="https://prismic.io/" target="_blank" rel="noreferrer">Prismic CMS</a> <a class="header-anchor" href="#prismic-cms" aria-label="Permalink to “Prismic CMS”">​</a></h3><p><code>Prismic</code> 是内容管理系统（CMS），可通过 <code>API</code> 与<code>Shopify</code> 集成，实现内容与电商功能的结合。目前 Aftershock 的布局原始数据都存储在这里。</p><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p><code>运营</code>：通过页面构造器对网页进行创建、更新和发布。</p><p><strong><code>开发者</code></strong>：配置网站页面页面、切片、字段。</p></div><h3 id="middleware" tabindex="-1">Middleware <a class="header-anchor" href="#middleware" aria-label="Permalink to “Middleware”">​</a></h3><p>为了把 <code>Prismic</code> 产生的页面数据更新到 <code>Shopify Metaobjects</code>，原开发团队在 <a href="https://vercel.com/" target="_blank" rel="noreferrer"><code>Vercel</code></a> 部署了一个用作接收 <code>webhook</code> 产生的数据并通过 <code>Shopify Admin API</code> 规范传输到 <code>Shopify</code> 的 NestJs(基于NodeJs) 项目作为中间件。<strong>目前正在探索中。。。</strong></p><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>你可以把它理解成为一个 <code>Prismic</code> 数据到 <code>Shopify</code> 的中转站。</p></div><div class="danger custom-block github-alert"><p class="custom-block-title">DANGER</p><p>😒目前还没有拿到这个项目的源码。</p></div><h3 id="retool" tabindex="-1">Retool <a class="header-anchor" href="#retool" aria-label="Permalink to “Retool”">​</a></h3><p>Aftershock 最大的特色亮点之一就是可以定制你的 PC，这时候需要有地方去存储定制的数据，此时就需要使用 <code>Retool</code> 存储定制 PC 的数据。而我们在 Prismic 创建定制 PC 的数据时，会创建为一个切片，再绑定到 PC Models 页面，做为列表的元素之一。此时 Prismic 通过 Webhooks 更新数据到了 Shopify 的 Metaobjects 用以确保数据的安全。最后在 Hydrogen 调取。</p>',15)),(i(),t(h,null,{default:a(()=>[l(o,{id:"mermaid-54",class:"mermaid my-class",graph:"flowchart%20LR%0A%0ARetool%20--%3E%20Prismic%20--webhook--%3E%20SM%5BShopify%20Metaobjects%5D%20--Storefront--%3E%20Hydrogen%20%0A"})]),fallback:a(()=>[...e[0]||(e[0]=[r(" Loading... ",-1)])]),_:1})),e[3]||(e[3]=s('<h3 id="shopify-metaobjects" tabindex="-1"><a href="https://admin.shopify.com/store/aftershockpcau" target="_blank" rel="noreferrer">Shopify Metaobjects</a> <a class="header-anchor" href="#shopify-metaobjects" aria-label="Permalink to “Shopify Metaobjects”">​</a></h3><p>Metaobjects = Shopify 中的“自定义数据模型（Custom Data Model）”。</p><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p>你可以把它理解成：</p><p>Shopify 为你提供的一个“无代码 CMS 数据建模系统”，用来创建任意结构的数据表（类似 Prismic、Sanity、Notion Database、Strapi）。</p></div><h3 id="shopify-storefront-api" tabindex="-1"><a href="https://shopify.dev/docs/api/storefront/latest" target="_blank" rel="noreferrer">Shopify Storefront API</a> <a class="header-anchor" href="#shopify-storefront-api" aria-label="Permalink to “Shopify Storefront API”">​</a></h3><p>通过 <code>GraphQL</code> 的方式调用 <code>Storefront API</code> 获取 <code>Shopify</code> 的相关数据，例如：<code>Metaobjects</code>、<code>RTS</code> 等数据。</p><h2 id="工具之间的关系图" tabindex="-1">工具之间的关系图 <a class="header-anchor" href="#工具之间的关系图" aria-label="Permalink to “工具之间的关系图”">​</a></h2>',6)),(i(),t(h,null,{default:a(()=>[l(o,{id:"mermaid-78",class:"mermaid my-class",graph:"flowchart%20LR%0A%0A%20%20Retool%20--if%20custom--%3E%20A%5BPrismic%5D%20--%3E%7CWebhook%7C%20B%5BMiddleware%5D%0A%20%20B%20--%3E%7CGraphQL%7C%20D%5BShopify%20Metaobjects%5D%0A%20%20D%20--%3E%7CGraphQL%7C%20E%5BShopify%20Storefront%5D%0A%0A%20%20classDef%20cms%20fill%3A%23f9f%2Cstroke%3A%23333%2Cstroke-width%3A1px%3B%0A%20%20classDef%20serverless%20fill%3A%23bbf%2Cstroke%3A%23333%2Cstroke-width%3A1px%3B%0A%20%20classDef%20store%20fill%3A%23bfb%2Cstroke%3A%23333%2Cstroke-width%3A1px%3B%0A%20%20classDef%20frontend%20fill%3A%23ffb%2Cstroke%3A%23333%2Cstroke-width%3A1px%3B%0A%0A%20%20class%20A%20cms%3B%0A%20%20class%20B%2CC%20serverless%3B%0A%20%20class%20D%20store%3B%0A%20%20class%20E%2CF%20frontend%3B%0A%0A"})]),fallback:a(()=>[...e[1]||(e[1]=[r(" Loading... ",-1)])]),_:1})),e[4]||(e[4]=s(`<h2 id="nodejs-环境要求" tabindex="-1">NodeJS 环境要求 <a class="header-anchor" href="#nodejs-环境要求" aria-label="Permalink to “NodeJS 环境要求”">​</a></h2><p>目前本地使用的是 <code>v22.21.0</code></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;engines&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&gt;=18.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="快速启动" tabindex="-1">快速启动 <a class="header-anchor" href="#快速启动" aria-label="Permalink to “快速启动”">​</a></h2><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p><a href="https://shopify.dev/docs/storefronts/headless/hydrogen/getting-started" target="_blank" rel="noreferrer">官网快速启动</a></p></div><h3 id="_1-先链接到shopify" tabindex="-1">1. 先链接到shopify <a class="header-anchor" href="#_1-先链接到shopify" aria-label="Permalink to “1. 先链接到shopify”">​</a></h3><p>为什么会把这个指令前置呢？因为你说不准什么时候就与 Shopify 断开了关联，且拿不到全局变量，这就很尴尬。所以如果没有把握的话，在运行你的项目之前，绑定一下。</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shopify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hydrogen</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link</span></span></code></pre></div><h3 id="_2-运行启动指令" tabindex="-1">2. 运行启动指令 <a class="header-anchor" href="#_2-运行启动指令" aria-label="Permalink to “2. 运行启动指令”">​</a></h3><p><img src="`+p+'" alt="aftershock" title="aftershock"></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><h3 id="_3-发布到-oxygen-测试服" tabindex="-1">3. 发布到 <code>Oxygen</code> 测试服 <a class="header-anchor" href="#_3-发布到-oxygen-测试服" aria-label="Permalink to “3. 发布到 Oxygen 测试服”">​</a></h3><p>每次你推送或合并 Hydrogen 仓库的更改时，Oxygen 都会自动部署到测试服。前提条件是</p><ol><li>你创建了新分支</li><li>你提交了新分支的代码</li><li>创建新的合并请求。</li></ol><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p>⚠️注意！此时还未确认合并代码，先<strong>不要</strong>确认合并。</p></div><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p><code>Oxygen</code> 会自动发布到测试服，并提供测试服地址。<a href="https://shopify.dev/docs/storefronts/headless/hydrogen/deployments/github?utm_source=chatgpt.com" target="_blank" rel="noreferrer">参考文档</a></p></div><h3 id="_4-发布到-oxygen" tabindex="-1">4. 发布到 <code>Oxygen</code> <a class="header-anchor" href="#_4-发布到-oxygen" aria-label="Permalink to “4. 发布到 Oxygen”">​</a></h3><p>代码在确认合并之后会<strong>自动</strong>发布到 <code>Oxygen</code> 无需多余的操作。</p><h2 id="开发工具" tabindex="-1">开发工具 <a class="header-anchor" href="#开发工具" aria-label="Permalink to “开发工具”">​</a></h2><p>建议使用 <code>vsode</code></p>',20))])}const C=d(f,[["render",k]]);export{_ as __pageData,C as default};
