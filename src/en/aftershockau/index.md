# AftershockPC-AU-Hydrogen

[[toc]]

## Overview

This project is based on `Shopify Hydrogen` + `Remix + React`, integrating various modern frontend tools and third-party services to deliver a high-performance, scalable development experience for e-commerce frontends.

## Tools Used in the Project

Before development and exploration, we need to understand the tools used in the project and their purposes to better comprehend the project.

### [Prismic CMS](https://prismic.io/)

`Prismic` is a Content Management System (CMS) that integrates with `Shopify` via `API` to combine content with e-commerce functionality. Currently, Aftershock's layout raw data is stored here.

>[!IMPORTANT]
> **`Operations`**: Create, update, and publish web pages using the page builder.
>
> **`Developers`**: Configure website pages, slices, and fields.

### Middleware

To update page data generated by `Prismic` to `Shopify Metaobjects`, the original development team deployed a NestJs (NodeJs-based) project on [`Vercel`](https://vercel.com/) as middleware. This project receives data from `webhook` and transmits it to `Shopify` via the `Shopify Admin API` specification. **Currently under exploration...**

>[!TIP]
>You can think of it as a relay station for data from `Prismic` to `Shopify`.

>[!DANGER]
>ðŸ˜’ The source code for this project is not yet available.

### Retool

One of Aftershock's most notable features is the ability to customize your PC, which requires a place to store customization data. This is where `Retool` comes in. When we create custom PC data in Prismic, it is created as a slice and bound to the PC Models page as an element in the list. Prismic then updates the data to Shopify's Metaobjects via Webhooks to ensure data security. Finally, the data is fetched in Hydrogen.

```mermaid
flowchart LR

Retool --> Prismic --webhook--> SM[Shopify Metaobjects] --Storefront--> Hydrogen 
```

### [Shopify Metaobjects](https://admin.shopify.com/store/aftershockpcau)

Metaobjects = "Custom Data Model" in Shopify.

>[!IMPORTANT]
>You can think of it as:
>
>A "no-code CMS data modeling system" provided by Shopify, used to create data tables of any structure (similar to Prismic, Sanity, Notion Database, Strapi).

### [Shopify Storefront API](https://shopify.dev/docs/api/storefront/latest)

Fetch relevant data from `Shopify`, such as `Metaobjects`, `RTS`, etc., by calling the `Storefront API` via `GraphQL`.

## Relationship Diagram of Tools

```mermaid
flowchart LR

  Retool --if custom--> A[Prismic] -->|Webhook| B[Middleware]
  B -->|GraphQL| D[Shopify Metaobjects]
  D -->|GraphQL| E[Shopify Storefront]

  classDef cms fill:#f9f,stroke:#333,stroke-width:1px;
  classDef serverless fill:#bbf,stroke:#333,stroke-width:1px;
  classDef store fill:#bfb,stroke:#333,stroke-width:1px;
  classDef frontend fill:#ffb,stroke:#333,stroke-width:1px;

  class A cms;
  class B,C serverless;
  class D store;
  class E,F frontend;

```

## NodeJS Environment Requirements

Currently using `v22.21.0` locally.

``` json
"engines": {
  "node": ">=18.0.0"
}
```

## Quick Start

>[!NOTE]
>[Official Quick Start Guide](https://shopify.dev/docs/storefronts/headless/hydrogen/getting-started)

### 1. First, Link to Shopify

Why is this command placed first? Because you never know when the connection to Shopify might be lost, and global variables become unavailable, which is problematic. So, if you're unsure, bind it before running your project.

``` bash
npx shopify hydrogen link
```

### 2. Run the Start Command

![aftershock](/screenshots/ScreenShot_2025-12-06_100340_406.png "aftershock")

``` bash
npm run dev
```

### 3. Deploy to `Oxygen` Test Environment

Each time you push or merge changes to the Hydrogen repository, Oxygen automatically deploys to the test environment. The prerequisites are:

1. You have created a new branch.
2. You have committed code to the new branch.
3. You have created a new merge request.

>[!IMPORTANT]
>âš ï¸ Note! At this point, the code merge has not been confirmed yet. **Do not** confirm the merge immediately.

>[!IMPORTANT]
>`Oxygen` will automatically deploy to the test environment and provide the test environment address. [Reference Documentation](https://shopify.dev/docs/storefronts/headless/hydrogen/deployments/github?utm_source=chatgpt.com)

### 4. Deploy to `Oxygen`

Once the code is confirmed and merged, it will be **automatically** deployed to `Oxygen` without any additional steps.

## Development Tools

It is recommended to use `VSCode`.